// Braine Desktop - About Panel
// Information about the project, how it works, and usage examples

import { VerticalBox, ScrollView } from "std-widgets.slint";
import { Theme } from "theme.slint";

// ═══════════════════════════════════════════════════════════════════════════
// About Panel - Project information and documentation
// ═══════════════════════════════════════════════════════════════════════════

export component AboutPanel inherits Rectangle {
    background: Theme.bg-panel;
    border-color: Theme.border;
    border-width: 1px;
    border-radius: 6px;
    
    ScrollView {
        VerticalBox {
            padding: 20px;
            spacing: 16px;
            
            // Header
            Text {
                text: "Braine — Neuromorphic Learning Substrate";
                color: Theme.text-primary;
                font-size: 20px;
                font-weight: 700;
            }
            
            Text {
                text: "2024-2026 Maplumi Labs. Developer: Elvis Ayiemba";
                color: Theme.text-secondary;
                font-size: 12px;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // What is Braine?
            Text {
                text: "What is Braine?";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "Braine is a research project exploring neuromorphic computing — a closed-loop learning substrate that learns through sparse recurrent dynamics, local plasticity rules, and scalar reward signals (neuromodulation). Unlike traditional neural networks, Braine uses NO backpropagation or gradient descent.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // Research Gaps
            Text {
                text: "Research Gaps Being Addressed";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "- Online, continual learning: learns in real-time from streaming experience.\n\n- Credit assignment without gradients: local Hebbian-like rules + neuromodulation (no backprop).\n\n- Catastrophic forgetting: mechanisms like dreaming/consolidation and causal memory.\n\n- Sample efficiency: learn useful behaviors from tens/hundreds of trials.\n\n- Emergent representations: symbols arise from interaction, not hand-engineered features.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // How it Works
            Text {
                text: "How It Works Internally";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "1. Sparse Recurrent Dynamics — A population of units with oscillating activations. Only a sparse subset fires at any moment, creating temporal patterns.\n\n2. Local Plasticity — Connections strengthen when pre/post units fire together near reward (Hebbian + neuromodulation). No global error signal.\n\n3. Neuromodulator — A scalar \"reward\" signal that gates learning. Positive = reinforce recent activity; negative = weaken it.\n\n4. Causal Memory — Tracks symbol co-occurrences and directed transitions to build a semantic graph. Enables meaning-based action selection.\n\n5. Observation Cycle — Each trial: stimulus → brain step → action selection → reward → commit observation. The brain learns from the consequence of its choices.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }

            // Quick start
            Text {
                text: "Quick start (local)";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }

            Text {
                text:
                    "Desktop UI (daemon client):\n"
                    + "• Start daemon:  cargo run -p brained\n"
                    + "• Start UI:      cargo run -p braine_desktop\n\n"
                    + "Web UI (browser runtime):\n"
                    + "• cd crates/braine_web && trunk serve --address 127.0.0.1 --port 8080\n\n"
                    + "Tip: If the UI shows 'connection refused', start `brained` first.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }

            Rectangle { height: 1px; background: Theme.border; }

            // Architecture / boundary
            Text {
                text: "Architecture (service boundary)";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }

            Text {
                text:
                    "Braine is a continuously running substrate. The system is intentionally split:\n\n"
                    + "• brained (daemon): owns the long-lived Brain state, task loop, persistence.\n"
                    + "• braine_desktop (this app): UI client that polls state and sends commands.\n"
                    + "• braine_cli: small client for automation/debugging.\n"
                    + "• braine_web: browser-hosted UI that runs a Brain in-process (no daemon).\n\n"
                    + "Important: Braine is not an LLM and must not be shaped like one. Learning is local and online; inference reads the learned dynamics.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }

            Rectangle { height: 1px; background: Theme.border; }

            // Protocol
            Text {
                text: "Protocol (desktop ↔ daemon)";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }

            Text {
                text:
                    "The desktop talks to the daemon over TCP using newline-delimited JSON on 127.0.0.1:9876.\n\n"
                    + "Common operations:\n"
                    + "• GetState: fetches the full UI snapshot (stats, HUD, plots, storage).\n"
                    + "• Start / Stop: runs or pauses the task loop (Stop persists).\n"
                    + "• SetGame: switches the active game (requires Stop first).\n"
                    + "• GetGameParams / SetGameParam: game knob schema and updates.\n"
                    + "• ReplayGetDataset / ReplaySetDataset: configure evaluation datasets.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }

            Rectangle { height: 1px; background: Theme.border; }

            // Games & controls
            Text {
                text: "Games & controls";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }

            Text {
                text:
                    "All games are closed-loop: stimulus → dynamics → action → reward → commit observation.\n\n"
                    + "Spot: left/right stimulus; choose LEFT(A) or RIGHT(D).\n"
                    + "Reversal: same as Spot but contingency flips; requires context tracking.\n"
                    + "Bandit: stochastic reward; learn expected value of A vs B.\n"
                    + "SpotXY: position stimulus on a grid (or binary mode); learn mapping to actions.\n"
                    + "Maze: navigation in a grid; use arrows/WASD.\n"
                    + "Pong: reactive control; typically actions are up/down/stay (depends on mode).\n"
                    + "Text: next-token regime; choose between available actions (often left/right) while the token stream shifts.\n"
                    + "Replay: dataset-driven evaluation; trials are provided from a replay dataset.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }

            Rectangle { height: 1px; background: Theme.border; }

            // Persistence
            Text {
                text: "Persistence";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }

            Text {
                text:
                    "The daemon persists the Brain image so learning carries across restarts.\n"
                    + "• Stop / Shutdown triggers a save.\n"
                    + "• There is also autosave logic in the daemon.\n"
                    + "If you want a clean slate, delete the saved brain image and restart the daemon.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }

            Rectangle { height: 1px; background: Theme.border; }

            // Troubleshooting
            Text {
                text: "Troubleshooting";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }

            Text {
                text:
                    "• Can't switch games: Stop first (daemon enforces this).\n"
                    + "• Desktop can't connect: ensure brained is running on 127.0.0.1:9876.\n"
                    + "• Linux runtime deps: some systems need libxkbcommon-x11 for the window backend.\n"
                    + "• Replay shows empty dataset: set a dataset via the replay controls (or update the dataset JSON).";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            // Similar Systems
            Text {
                text: "Related Work & Similar Systems";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "- HTM (Hierarchical Temporal Memory): sparse distributed representations.\n\n- Spiking neural networks: STDP-like plasticity on neuromorphic hardware.\n\n- Reservoir computing / Echo State Networks: recurrent dynamics with readout.\n\n- Liquid State Machines: spiking reservoirs.\n\n- Active inference / Free Energy: perception and action framed as minimizing prediction error.\n\nBraine differs by combining oscillatory sparse coding, pure local learning, explicit causal/meaning memory, and interactive games for grounded evaluation.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // LLM Integration
            Text {
                text: "Integration with Large Language Models";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "Braine and LLMs are complementary:\n\n• LLM → Braine: An LLM could translate natural language goals into symbolic stimuli/actions that Braine can learn from. The LLM provides high-level reasoning; Braine handles low-level sensorimotor grounding.\n\n• Braine → LLM: Braine's causal memory graph could provide LLMs with grounded world models — learned from actual interaction rather than text. \"What happens when I press left?\" → Braine knows from experience.\n\n• Hybrid Agent: LLM for planning/language, Braine for real-time reactive control and online adaptation. The LLM reasons; Braine acts and learns.\n\n• Embodied LLM Grounding: Braine could serve as the \"body\" for an LLM agent, providing learned sensorimotor primitives the LLM can invoke.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // Novel Use Cases
            Text {
                text: "Novel Edge Applications";
                color: Theme.accent-blue;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "Braine's lightweight, gradient-free design makes it ideal for edge deployment:\n\n• Adaptive IoT Sensors — A temperature sensor that learns normal patterns and adapts its alerting threshold without cloud connectivity.\n\n• Personalized Wearables — A fitness tracker that learns YOUR movement patterns and detects anomalies (falls, fatigue) in real-time on-device.\n\n• Autonomous Micro-Robots — Tiny robots (e.g., agricultural drones, pipe inspectors) that learn navigation without a connection to a training server.\n\n• Industrial Predictive Maintenance — Vibration sensors on machinery that learn baseline behavior and detect drift/anomalies locally.\n\n• Smart Home Devices — Light switches that learn your routine and anticipate your needs without sending data to the cloud.\n\n• Prosthetics & BCIs — Adaptive control systems that learn from user intent signals in real-time, improving over days/weeks of use.\n\n• Offline Game NPCs — Non-player characters that genuinely learn from player behavior, creating unique experiences without server-side ML.";
                color: Theme.text-primary;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // Research Disclaimer
            Text {
                text: "Research Disclaimer";
                color: Theme.accent-yellow;
                font-size: 16px;
                font-weight: 600;
            }
            
            Text {
                text: "This system was developed with the assistance of Large Language Models (LLMs) under human guidance. It is provided as a RESEARCH DEMONSTRATION to explore biologically-inspired learning substrates. Braine is NOT PRODUCTION-READY and should not be used for real-world deployment, safety-critical applications, or any scenario requiring reliability guarantees. Use at your own discretion for educational and experimental purposes only.";
                color: Theme.accent-yellow;
                font-size: 13px;
                wrap: word-wrap;
            }
            
            Rectangle { height: 1px; background: Theme.border; }
            
            // Footer
            Text {
                text: "This is experimental research software. Expect rough edges!";
                color: Theme.text-secondary;
                font-size: 12px;
            }
            
            Text {
                text: "Version 0.1.0 — https://github.com/maplumi/braine";
                color: Theme.text-secondary;
                font-size: 11px;
            }
        }
    }
}
